<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="sidebar">
      <div class="sidebar-header">
        <button class="menu-btn" id="menuBtn" title="–ú–µ–Ω—é"><i class="fas fa-bars"></i></button>
        <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫" id="searchInput">
        <button class="menu-btn" id="settingsBtn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
          <i class="fas fa-cog"></i>
        </button>
      </div>
      
      <div class="sidebar-tabs">
        <button class="sidebar-tab active" data-tab="chats">
          <i class="fas fa-comments"></i>
          <span>–ß–∞—Ç—ã</span>
        </button>
        <button class="sidebar-tab" data-tab="channels">
          <i class="fas fa-bullhorn"></i>
          <span>–ö–∞–Ω–∞–ª—ã</span>
        </button>
      </div>
      
      <div class="chat-list" id="chatList">
        <!-- –ß–∞—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
      </div>
      
      <div class="channel-list" id="channelList" style="display: none;">
        <!-- –ö–∞–Ω–∞–ª—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
      </div>
      
      <button class="create-btn" id="createBtn" title="–°–æ–∑–¥–∞—Ç—å">
        <i class="fas fa-plus"></i>
      </button>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
    <div class="chat-area">
      <div class="chat-header">
        <div class="chat-info">
          <div class="avatar">–ê</div>
          <div class="chat-details">
            <div class="chat-name">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</div>
            <div class="chat-status">–æ–Ω–ª–∞–π–Ω</div>
          </div>
        </div>
        <div class="chat-actions">
          <button class="action-btn" id="voiceCallBtn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫"><i class="fas fa-phone"></i></button>
          <button class="action-btn" id="videoCallBtn" title="–í–∏–¥–µ–æ –∑–≤–æ–Ω–æ–∫"><i class="fas fa-video"></i></button>
          <button class="action-btn" id="screenShareBtn" title="–¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —ç–∫—Ä–∞–Ω–∞"><i class="fas fa-desktop"></i></button>
          <button class="action-btn"><i class="fas fa-search"></i></button>
          <button class="action-btn"><i class="fas fa-ellipsis-v"></i></button>
        </div>
      </div>

      <div class="pinned-message-bar" id="pinnedMessageBar">
        <div class="pinned-icon">üìå</div>
        <div class="pinned-content">
          <div class="pinned-author" id="pinnedAuthor">–ó–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</div>
          <div class="pinned-text" id="pinnedText"></div>
        </div>
        <button class="unpin-btn" id="unpinBtn" title="–û—Ç–∫—Ä–µ–ø–∏—Ç—å">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="messages-container" id="messagesContainer">
        <div class="welcome-message">
          <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä</h2>
          <p>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞</p>
        </div>
      </div>

      <div class="reply-preview" id="replyPreview" style="display: none;">
        <div class="reply-content">
          <div class="reply-header">–û—Ç–≤–µ—Ç –Ω–∞:</div>
          <div class="reply-text" id="replyText"></div>
        </div>
        <button class="cancel-reply-btn" id="cancelReplyBtn"><i class="fas fa-times"></i></button>
      </div>

      <div class="message-input-area">
        <button class="attach-btn" id="attachBtn"><i class="fas fa-paperclip"></i></button>
        <div class="input-wrapper">
          <div class="message-input" id="messageInput" contenteditable="true" data-placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..."></div>
        </div>
        <button class="emoji-btn" id="emojiBtn"><i class="far fa-smile"></i></button>
        <button class="voice-btn" id="voiceBtn"><i class="fas fa-microphone"></i></button>
        <button class="send-btn" id="sendBtn" style="display: none;"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
  </div>

  <!-- –ú–µ–Ω—é –≤–ª–æ–∂–µ–Ω–∏–π -->
  <div class="attach-menu" id="attachMenu">
    <div class="attach-menu-overlay"></div>
    <div class="attach-menu-content">
      <button class="attach-menu-item" data-type="image">
        <div class="attach-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <i class="fas fa-image"></i>
        </div>
        <span>–§–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ</span>
      </button>
      <button class="attach-menu-item" data-type="file">
        <div class="attach-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
          <i class="fas fa-file"></i>
        </div>
        <span>–§–∞–π–ª</span>
      </button>
      <button class="attach-menu-item" data-type="video">
        <div class="attach-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
          <i class="fas fa-video"></i>
        </div>
        <span>–í–∏–¥–µ–æ</span>
      </button>
      <button class="attach-menu-item" data-type="audio">
        <div class="attach-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
          <i class="fas fa-music"></i>
        </div>
        <span>–ú—É–∑—ã–∫–∞</span>
      </button>
      <button class="attach-menu-item" data-type="location">
        <div class="attach-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <span>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</span>
      </button>
      <button class="attach-menu-item" data-type="contact">
        <div class="attach-icon" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);">
          <i class="fas fa-user"></i>
        </div>
        <span>–ö–æ–Ω—Ç–∞–∫—Ç</span>
      </button>
    </div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å —ç–º–æ–¥–∑–∏ -->
  <div class="emoji-picker" id="emojiPicker">
    <div class="emoji-tabs">
      <button class="emoji-tab active" data-category="smileys">üòä</button>
      <button class="emoji-tab" data-category="animals">üê∂</button>
      <button class="emoji-tab" data-category="food">üçï</button>
      <button class="emoji-tab" data-category="activities">‚öΩ</button>
      <button class="emoji-tab" data-category="travel">‚úàÔ∏è</button>
      <button class="emoji-tab" data-category="objects">üí°</button>
      <button class="emoji-tab" data-category="symbols">‚ù§Ô∏è</button>
    </div>
    <div class="emoji-search">
      <input type="text" placeholder="–ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏..." id="emojiSearch">
    </div>
    <div class="emoji-grid" id="emojiGrid"></div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å —Å—Ç–∏–∫–µ—Ä–æ–≤ -->
  <div class="sticker-picker" id="stickerPicker">
    <div class="sticker-tabs">
      <button class="sticker-tab active" data-pack="pack1">–ù–∞–±–æ—Ä 1</button>
      <button class="sticker-tab" data-pack="pack2">–ù–∞–±–æ—Ä 2</button>
      <button class="sticker-tab" data-pack="custom">–°–≤–æ–∏</button>
    </div>
    <div class="sticker-grid" id="stickerGrid">
      <div class="sticker-placeholder">
        <i class="fas fa-plus-circle"></i>
        <p>–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ —Å—Ç–∏–∫–µ—Ä—ã</p>
        <button class="add-sticker-btn" id="addStickerBtn">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–∫–µ—Ä—ã</button>
      </div>
    </div>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —Å–æ–æ–±—â–µ–Ω–∏—è -->
  <div class="message-context-menu" id="messageContextMenu">
    <button class="context-menu-item" data-action="reply">
      <i class="fas fa-reply"></i>
      <span>–û—Ç–≤–µ—Ç–∏—Ç—å</span>
    </button>
    <button class="context-menu-item" data-action="edit">
      <i class="fas fa-edit"></i>
      <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
    </button>
    <button class="context-menu-item" data-action="copy">
      <i class="fas fa-copy"></i>
      <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
    </button>
    <button class="context-menu-item" data-action="forward">
      <i class="fas fa-share"></i>
      <span>–ü–µ—Ä–µ—Å–ª–∞—Ç—å</span>
    </button>
    <button class="context-menu-item" data-action="pin">
      <i class="fas fa-thumbtack"></i>
      <span>–ó–∞–∫—Ä–µ–ø–∏—Ç—å</span>
    </button>
    <button class="context-menu-item danger" data-action="delete">
      <i class="fas fa-trash"></i>
      <span>–£–¥–∞–ª–∏—Ç—å</span>
    </button>
  </div>

  <input type="file" id="fileInput" style="display: none;" multiple>
  <input type="file" id="imageInput" style="display: none;" accept="image/*" multiple>
  <input type="file" id="videoInput" style="display: none;" accept="video/*">
  <input type="file" id="audioInput" style="display: none;" accept="audio/*">
  <input type="file" id="stickerInput" style="display: none;" accept="image/*" multiple>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–µ—Ä–µ—Å—ã–ª–∫–∏ -->
  <div class="forward-modal" id="forwardModal">
    <div class="forward-overlay"></div>
    <div class="forward-container">
      <div class="forward-header">
        <h3>–ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
        <button class="close-forward-btn" id="closeForwardBtn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="forward-search">
        <input type="text" placeholder="–ü–æ–∏—Å–∫ —á–∞—Ç–æ–≤..." id="forwardSearch">
      </div>
      <div class="forward-list" id="forwardList">
        <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Å—ã–ª–∫–∏ -->
      </div>
      <div class="forward-actions">
        <button class="btn-secondary" id="cancelForwardBtn">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" id="confirmForwardBtn">–ü–µ—Ä–µ—Å–ª–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–≤–æ–Ω–∫–∞ -->
  <div class="call-modal" id="callModal">
    <div class="call-container">
      <div class="call-header">
        <h3 id="callTitle">–í–∏–¥–µ–æ –∑–≤–æ–Ω–æ–∫</h3>
        <button class="close-call-btn" id="closeCallBtn"><i class="fas fa-times"></i></button>
      </div>
      
      <div class="video-container">
        <video id="remoteVideo" autoplay playsinline></video>
        <video id="localVideo" autoplay playsinline muted></video>
        <div class="call-info" id="callInfo">
          <div class="caller-name" id="callerName">–ê–Ω–Ω–∞ –ò–≤–∞–Ω–æ–≤–∞</div>
          <div class="call-status" id="callStatus">–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ...</div>
        </div>
      </div>
      
      <div class="call-controls">
        <button class="call-control-btn" id="toggleMicBtn" title="–ú–∏–∫—Ä–æ—Ñ–æ–Ω">
          <i class="fas fa-microphone" id="micIcon"></i>
        </button>
        <button class="call-control-btn" id="toggleCameraBtn" title="–ö–∞–º–µ—Ä–∞">
          <i class="fas fa-video" id="cameraIcon"></i>
        </button>
        <button class="call-control-btn end-call" id="endCallBtn" title="–ó–∞–≤–µ—Ä—à–∏—Ç—å">
          <i class="fas fa-phone-slash"></i>
        </button>
        <button class="call-control-btn" id="toggleScreenBtn" title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞">
          <i class="fas fa-desktop" id="screenIcon"></i>
        </button>
        <button class="call-control-btn" id="toggleSpeakerBtn" title="–î–∏–Ω–∞–º–∏–∫">
          <i class="fas fa-volume-up" id="speakerIcon"></i>
        </button>
      </div>
    </div>
  </div>

  <script src="client-config.js"></script>
  <script src="app-settings.js"></script>
  <script src="user-manager.js"></script>
  <script src="update-manager.js"></script>
  <script src="channels.js"></script>
  <script src="call.js"></script>
  <script src="messages.js"></script>
  <script src="app.js"></script>
</body>
</html>
